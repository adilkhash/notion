{% load i18n %}
{% load static %}
{% load assets %}
{% get_current_language as LANGUAGE_CODE %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}" class="scroll-smooth">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{% spaceless %}{% block meta_description %}{% trans 'Software engineer personal blog. Usually write about building web apps, machine learning and data analysis' %}{% endblock %}{% endspaceless %}" />
    <meta name="google-site-verification" content="2oW122oyzuORLWrpVhZ29-2w0dTvpjiEL922qCuSa5M" />
    <title>{% block title %}{% trans "Adil Khashtamov's personal blog — pragmatic programmer" %}{% endblock %}</title>

    <!-- Canonical URL -->
    <link rel="canonical" href="{% block canonical_url %}{{ request.build_absolute_uri }}{% endblock %}">

    <!-- Open Graph -->
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:title" content="{% block og_title %}{% trans "Adil Khashtamov's personal blog — pragmatic programmer" %}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{% trans 'Software engineer personal blog. Usually write about building web apps, machine learning and data analysis' %}{% endblock %}">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:image" content="{% block og_image %}{{ request.scheme }}://{{ request.get_host }}{% static 'images/og-default.png' %}{% endblock %}">
    <meta property="og:locale" content="{{ LANGUAGE_CODE }}">
    <meta property="og:site_name" content="Adil Khashtamov">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@adaborik">
    <meta name="twitter:title" content="{% block twitter_title %}{% trans "Adil Khashtamov's personal blog — pragmatic programmer" %}{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}{% trans 'Software engineer personal blog. Usually write about building web apps, machine learning and data analysis' %}{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{{ request.scheme }}://{{ request.get_host }}{% static 'images/og-default.png' %}{% endblock %}">

    <!-- JSON-LD Website Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Adil Khashtamov",
        "url": "{{ request.scheme }}://{{ request.get_host }}/",
        "description": "{% trans 'Software engineer personal blog. Usually write about building web apps, machine learning and data analysis' %}",
        "author": {
            "@type": "Person",
            "name": "Adil Khashtamov",
            "url": "{{ request.scheme }}://{{ request.get_host }}/{{ LANGUAGE_CODE }}/p/about/"
        },
        "potentialAction": {
            "@type": "SearchAction",
            "target": "{{ request.scheme }}://{{ request.get_host }}/{{ LANGUAGE_CODE }}/search/?query={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    {% block json_ld %}{% endblock %}

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- Tailwind CSS Bundle -->
    <link href="{% static 'css/main.min.css' %}" rel="stylesheet">

    <link href="{% static 'images/icon.png' %}" rel="shortcut icon" type="image/x-icon" />
{% block _head %}{% endblock %}
</head>

<body class="font-sans bg-white text-ink-700 antialiased min-h-screen flex flex-col">
    <!-- Header -->
    <header class="top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-ink-100">
        <div class="max-w-6xl mx-auto px-6 py-5">
            <div class="flex items-center justify-between">
                <!-- Logo & Tagline -->
                <div class="flex-shrink-0">
                    <a href="/" class="group flex items-center gap-3">
                        <div class="w-10 h-10 rounded-xl bg-ink-900 flex items-center justify-center text-white font-semibold text-lg group-hover:bg-accent-500 transition-colors duration-200">
                            AK
                        </div>
                        <div>
                            <div class="font-semibold text-ink-900 tracking-tight">Adyl Khashtamov</div>
                            <div class="text-xs text-ink-400 font-light">{% trans "Software Engineer" %}</div>
                        </div>
                    </a>
                </div>

                <!-- Language Switcher -->
                <nav class="flex items-center gap-1">
                    {% if LANGUAGE_CODE == 'ru' %}
                    <a href="/en/" class="flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium text-ink-600 hover:text-ink-900 hover:bg-ink-50 transition-all duration-200" title="Switch to English">
                        <img src="{% static 'images/us-flag.png' %}" alt="English" class="w-5 h-5 rounded-sm shadow-sm object-cover">
                        <span>EN</span>
                    </a>
                    {% else %}
                    <a href="/ru/" class="flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium text-ink-600 hover:text-ink-900 hover:bg-ink-50 transition-all duration-200" title="Переключить на русский">
                        <img src="{% static 'images/ru-flag.png' %}" alt="Русский" class="w-5 h-5 rounded-sm shadow-sm object-cover">
                        <span>RU</span>
                    </a>
                    {% endif %}
                </nav>
            </div>

            <!-- Search -->
            <div class="mt-5">
                <form action="{% url 'blog:search' %}" method="get" class="relative max-w-md">
                    <input
                        type="text"
                        name="query"
                        placeholder="{% trans 'Search articles...' %}"
                        class="w-full pl-11 pr-4 py-2.5 bg-ink-50 border-0 rounded-xl text-sm text-ink-700 placeholder:text-ink-400 focus:bg-white focus:ring-2 focus:ring-accent-500/20 focus:outline-none transition-all duration-200"
                    >
                    <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-ink-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                </form>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 max-w-6xl w-full mx-auto px-6 py-12">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-ink-900 text-white mt-auto">
        <div class="max-w-6xl mx-auto px-6 py-16">
            <div class="grid md:grid-cols-2 gap-12 mb-12">
                <!-- About -->
                <div>
                    <h3 class="font-semibold text-lg mb-4">{% trans "About" %}</h3>
                    <p class="text-ink-300 text-sm leading-relaxed">
                        {% trans "A personal blog sharing intermediate-level software engineering tutorials and experiences, focusing on Python, system design, and distributed systems." %}
                    </p>
                </div>

                <!-- Connect -->
                <div>
                    <h3 class="font-semibold text-lg mb-4">{% trans "Connect" %}</h3>
                    <div class="flex gap-3">
                        <a href="https://github.com/adilkhash" class="w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center hover:bg-accent-500 transition-colors duration-200" aria-label="GitHub">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/adilkhash" class="w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center hover:bg-accent-500 transition-colors duration-200" aria-label="Twitter">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://www.linkedin.com/in/adylzhan-khashtamov-b0432586/" class="w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center hover:bg-accent-500 transition-colors duration-200" aria-label="LinkedIn">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                            </svg>
                        </a>
                        <a href="{% url 'blog:feed' %}" class="w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center hover:bg-accent-500 transition-colors duration-200" aria-label="RSS Feed">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Bottom -->
            <div class="pt-8 border-t border-white/10 text-center text-ink-400 text-sm">
                <p>{% trans "Powered by" %} Django {{ DJANGO_VERSION }} & Python {{ PYTHON_VERSION }} &middot; 2015 — {% now 'Y' %}</p>
            </div>
        </div>
    </footer>

{% block _bottom %}{% endblock %}
    {% if not DEBUG %}
<!-- Yandex.Metrika informer -->
<a href="https://metrika.yandex.ru/stat/?id=32700075&amp;from=informer" target="_blank" rel="nofollow">
    <img src="https://informer.yandex.ru/informer/32700075/3_1_FFFFFFFF_EFEFEFFF_0_pageviews"
         style="width:88px; height:31px; border:0;"
         alt="Яндекс.Метрика"
         title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)"
        class="ym-advanced-informer" data-cid="32700075" data-lang="ru"/>
</a>
<!-- /Yandex.Metrika informer -->

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js', 'ym');

    ym(32700075, 'init', {webvisor:true, clickmap:true, accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/32700075" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
{% endif %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
