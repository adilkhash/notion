{% load i18n %}
{% load staticfiles %}
{% get_current_language as LANGUAGE_CODE %}

<div class="col-md-4">

    <div class="sidebar-widget" style="margin-top:40px;">
        <h4 class="sidebar-title">{% trans 'Search' %}</h4>
        <form action="{% url 'blog:search' %}" method="get" class="form-inline" {% if not DEBUG %}onsubmit="yaCounter32700075.reachGoal('searchBtnClick'); return true;"{% endif %}>
            <input style="width: 100%;border-radius:1px;" class="form-control" type="text" name="query"
                    {% if query %} value="{{ query }}"
                   {% else %}placeholder="{% trans 'search term' %}"{% endif %}>

            <button class="btn btn-primary btn-block"
                    style="margin-top:10px;border-radius:1px;">{% trans 'Find' %}</button>
        </form>
    </div>

    {% if LANGUAGE_CODE == 'ru' %}
        <div class="sidebar-widget">
            <h4 class="sidebar-title">Мой {% trans 'Telegram' %} канал</h4>
            <img src="{% static 'images/devbrain.jpg' %}" style="float:left;padding-right:15px;" alt="Telegram канал @devbrain" />
            <p>
                Будьте всегда в курсе свежих материалов из мира разработки ПО.
            </p>
            <p>
                <a href="tg://devbrain" rel="nofollow" target="_blank">Подписаться на канал</a>
            </p>
        </div>
    {% else %}
        <div class="sidebar-widget">
        {% if not DEBUG %}
            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <!-- khashtamov sidebar -->
            <ins class="adsbygoogle"
                 style="display:inline-block;width:336px;height:280px"
                 data-ad-client="ca-pub-3273608550190378"
                 data-ad-slot="5668516817"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        {% endif %}
        </div>
    {% endif %}

{% if LANGUAGE_CODE == 'ru' %}
    <div class="sidebar-widget">
        {% if not DEBUG %}
        <!-- Yandex.RTB R-A-208346-4 -->
        <div id="yandex_rtb_R-A-208346-4"></div>
        <script type="text/javascript">
            (function(w, d, n, s, t) {
                w[n] = w[n] || [];
                w[n].push(function() {
                    Ya.Context.AdvManager.render({
                        blockId: "R-A-208346-4",
                        renderTo: "yandex_rtb_R-A-208346-4",
                        async: true
                    });
                });
                t = d.getElementsByTagName("script")[0];
                s = d.createElement("script");
                s.type = "text/javascript";
                s.src = "//an.yandex.ru/system/context.js";
                s.async = true;
                t.parentNode.insertBefore(s, t);
            })(this, this.document, "yandexContextAsyncCallbacks");
        </script>
        {% endif %}
    </div>
{% endif %}

    <div class="sidebar-widget">
        <h4 class="sidebar-title">{% trans 'Recent posts' %}</h4>
        <ul style="padding:0; list-style: none;">
            {% for post in recent_posts %}
                <li><a href="{% url 'blog:post' slug=post.slug %}">{{ post.title }}</a></li>
            {% endfor %}
        </ul>
    </div>
    
{#    <div class="sidebar-widget">#}
{#        {% if not DEBUG %}#}
{#            <!-- Yandex.RTB R-A-208346-1 -->#}
{#            <div id="yandex_rtb_R-A-208346-1"></div>#}
{#            <script type="text/javascript">#}
{#                (function(w, d, n, s, t) {#}
{#                    w[n] = w[n] || [];#}
{#                    w[n].push(function() {#}
{#                        Ya.Context.AdvManager.render({#}
{#                            blockId: "R-A-208346-1",#}
{#                            renderTo: "yandex_rtb_R-A-208346-1",#}
{#                            async: true#}
{#                        });#}
{#                    });#}
{#                    t = d.getElementsByTagName("script")[0];#}
{#                    s = d.createElement("script");#}
{#                    s.type = "text/javascript";#}
{#                    s.src = "//an.yandex.ru/system/context.js";#}
{#                    s.async = true;#}
{#                    t.parentNode.insertBefore(s, t);#}
{#                })(this, this.document, "yandexContextAsyncCallbacks");#}
{#            </script>#}
{#        {% endif %}#}
{#    </div>#}
    
    <div class="sidebar-widget">
        <h4 class="sidebar-title">{% trans 'Most popular' %}</h4>
        <ul style="padding:0; list-style: none;">
            {% for post in popular_posts %}
                <li><a href="{% url 'blog:post' slug=post.slug %}">{{ post.title }}</a></li>
            {% endfor %}
        </ul>
    </div>

</div>
