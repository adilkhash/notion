{% load i18n %}
{% load staticfiles %}

<div class="col-md-4">
    <div class="sidebar-widget" style="margin-top:40px;">
        <h4 class="sidebar-title">{% trans 'Ad' %}</h4>
        <a href="https://goo.gl/KHzeuT" target="_blank" rel="nofollow noindex">
        <img src="{% static 'images/machine-learning-course.jpg' %}" alt="Курс машинного обучения" title="Машинное обучение на практике"></a>
    </div>

    <div class="sidebar-widget">
        <h4 class="sidebar-title">{% trans 'Search' %}</h4>

        <form action="{% url 'blog:search' %}" method="get" class="form-inline" {% if not DEBUG %}onsubmit="yaCounter32700075.reachGoal('searchBtnClick'); return true;"{% endif %}>
            <input style="width: 100%;border-radius:1px;" class="form-control" type="text" name="query"
                    {% if query %} value="{{ query }}"
                   {% else %}placeholder="{% trans 'search term' %}"{% endif %}>

            <button class="btn btn-primary btn-block"
                    style="margin-top:10px;border-radius:1px;">{% trans 'Find' %}</button>
        </form>
    </div>

    <div class="sidebar-widget">
        <h4 class="sidebar-title">{% trans 'Recent posts' %}</h4>

        <ul style="padding:0; list-style: none;">
            {% for post in recent_posts %}
                <li><a href="{% url 'blog:post' slug=post.slug %}">{{ post.title }}</a></li>
            {% endfor %}
        </ul>
    </div>

    <div class="sidebar-widget">
        <h4 class="sidebar-title">{% trans 'Most popular' %}</h4>
        <ul style="padding:0; list-style: none;">
            {% for post in popular_posts %}
                <li><a href="{% url 'blog:post' slug=post.slug %}">{{ post.title }}</a></li>
            {% endfor %}
        </ul>
    </div>

    <div class="sidebar-widget">
        <h4 class="sidebar-title">{% trans 'Ad' %}</h4>
        {% if not DEBUG %}
            <!-- Yandex.RTB R-A-208346-1 -->
            <div id="yandex_rtb_R-A-208346-1"></div>
            <script type="text/javascript">
                (function(w, d, n, s, t) {
                    w[n] = w[n] || [];
                    w[n].push(function() {
                        Ya.Context.AdvManager.render({
                            blockId: "R-A-208346-1",
                            renderTo: "yandex_rtb_R-A-208346-1",
                            async: true
                        });
                    });
                    t = d.getElementsByTagName("script")[0];
                    s = d.createElement("script");
                    s.type = "text/javascript";
                    s.src = "//an.yandex.ru/system/context.js";
                    s.async = true;
                    t.parentNode.insertBefore(s, t);
                })(this, this.document, "yandexContextAsyncCallbacks");
            </script>
        {% endif %}
    </div>

</div>
