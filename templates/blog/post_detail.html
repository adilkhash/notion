{% extends 'base.html' %}
{% load i18n %}

{% block title %}{{ object.title }}{% endblock %}

{% block meta_description %}{{ object.text|striptags|truncatechars:200 }}{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <article>
                    <h1>{{ object.title }}</h1>

                    <div class="article-meta">
                        <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
                        <span>{{ object.created|date:"j N o" }}</span>, <a
                            href="{% url 'blog:category' slug=object.category.slug %}">{{ object.category.title }}</a>,
                        <span>{{ object.page_views }} {% trans 'views' %}</span>
                    </div>
                    {{ object.text|safe }}
                </article>
                {% if DEBUG %}
                    <!-- Yandex.RTB R-A-208346-2 -->
                    <div id="yandex_rtb_R-A-208346-2"></div>
                    <script type="text/javascript">
                        (function (w, d, n, s, t) {
                            w[n] = w[n] || [];
                            w[n].push(function () {
                                Ya.Context.AdvManager.render({
                                    blockId: "R-A-208346-2",
                                    renderTo: "yandex_rtb_R-A-208346-2",
                                    horizontalAlign: false,
                                    async: true
                                });
                            });
                            t = d.getElementsByTagName("script")[0];
                            s = d.createElement("script");
                            s.type = "text/javascript";
                            s.src = "//an.yandex.ru/system/context.js";
                            s.async = true;
                            t.parentNode.insertBefore(s, t);
                        })(this, this.document, "yandexContextAsyncCallbacks");
                    </script>
                {% endif %}
            </div>
        </div>

        {% if related_articles %}
            <div class="row">
                <div class="col-md-12">
                    <h2>{% trans 'Related posts' %}:</h2>
                    <ul>
                        {% for related_article in related_articles %}
                            <li><a href="{% url 'blog:post' slug=related_article.slug %}">{{ related_article.title }}</a></li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        {% endif %}
    </div>

{% endblock %}
